<%- include ('../partials/head') %>
<%- include ('../partials/nav') %>

<main>
    <div class="container">

        <!-- Filter button -->
        <button id="sortByDate" class="btn btn-secondary">Sort by Due Date</button>

        <!-- THE REST OF YOUR HTML CODE GOES HERE -->
        <% if (locals.message) { %>
        <div class="alert alert-<%- locals.error ? 'danger' : 'success' %>" role="alert">
            <%= message %>
        </div>
        <% } %>

        <% jobs.forEach(jobs => { %>
        <div class="card" style="width: 30rem;">

            <!-- <img src="..." class="card-img-top" alt="..."> -->
            <div class="card-body">
                <h5 class="card-title"><%=jobs.role%></h5>
                <p class="card-text">Company: <%=jobs.company %></p>
                <p class="card-text">Location: <%=jobs.location %></p>
                <p class="card-text">Date Posted: <%=jobs.date_posted %></p>
                <a href="<%=jobs.application_link%>" class="btn btn-primary">Apply</a>
            </div>
        </div><br>
        <% }) %>

    </div>

</main>

<%- include ('../partials/footer') %>

<script>
    // JavaScript to handle sorting
    document.getElementById('sortByDate').addEventListener('click', function () {
        // Assuming jobs array has a property named 'due_date'
        jobs.sort(function (a, b) {
            return new Date(a.due_date) - new Date(b.due_date);
        });

        // Clear existing cards
        document.querySelector('.container').innerHTML = '';

        // Render sorted cards
        jobs.forEach(jobs => {
            var card = document.createElement('div');
            card.className = 'card';
            card.style = 'width: 30rem;';

            card.innerHTML = `
                <div class="card-body">
                    <h5 class="card-title">${jobs.role}</h5>
                    <p class="card-text">Company: ${jobs.company}</p>
                    <p class="card-text">Location: ${jobs.location}</p>
                    <p class="card-text">Date Posted: ${jobs.date_posted}</p>
                    <a href="${jobs.application_link}" class="btn btn-primary">Apply</a>
                </div>
            `;

            document.querySelector('.container').appendChild(card);
        });
    });
</script>

